class BlockFilterSorter{constructor(){this.filterSelect=document.getElementById("atfp-blocks-filter"),this.categorySelect=document.getElementById("atfp-blocks-category"),this.tableBody=document.querySelector(".atfp-supported-blocks-table tbody"),this.atfpDataTableObj=null,this.tableBody&&(this.atfpDataTable(),this.filterSelect.addEventListener("input",this.datatableFilterHandler),this.categorySelect.addEventListener("input",this.datatableCategoryHandler))}atfpDataTable(){if(this.tableBody){this.atfpDataTableObj=new DataTable("#atfp-supported-blocks-table",{pageLength:25,infoCallback:function(settings,start,end,total,max){return`Showing ${start} to ${end} of ${max} records`}}),this.atfpDataTableObj.on("draw.dt",(function(e){const rows=jQuery(this).find("tbody tr");0===rows.length.length&&this.atfpDataTableObj.empty(),rows.each((function(index,row){const emptyCell=row.querySelector("td.dt-empty");emptyCell||(row.children[0].textContent=index+1)}))}));const tableWrp=document.getElementById("atfp-supported-blocks-table_wrapper"),selectWrapper=document.querySelector(".atfp-supported-blocks-filters");selectWrapper.remove(),tableWrp.prepend(selectWrapper)}}datatableFilterHandler=()=>{if(this.atfpDataTableObj){let selectedFilter=this.filterSelect.value.charAt(0).toUpperCase()+this.filterSelect.value.slice(1);selectedFilter="All"===selectedFilter?"":selectedFilter,this.atfpDataTableObj.column(3).search(selectedFilter,!1,!1,!1).draw()}};datatableCategoryHandler=()=>{if(this.atfpDataTableObj){let selectedCategory=this.categorySelect.value;selectedCategory="all"!==selectedCategory&&selectedCategory,this.atfpDataTableObj.column(1).search(selectedCategory?new RegExp("^"+selectedCategory+"/"):"",!1,!1,!1).draw()}}}window.addEventListener("load",()=>{new BlockFilterSorter});